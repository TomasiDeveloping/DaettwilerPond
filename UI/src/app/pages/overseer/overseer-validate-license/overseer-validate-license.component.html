<!-- Dialog Title -->
<h1 class="text-center" mat-dialog-title>E-Fischereipatent Validieren</h1>

<!-- Dialog Content -->
<div mat-dialog-content>

  <!-- Camera Selection Section -->
  @if (cameras.length > 1) {
    <div class="row mb-3">
      <div class="form-group">
        <label class="control-label" for="cameraSelect">Kamera Auswahl</label>
        <select class="form-select" (change)="onCameraChange($event)" id="cameraSelect" [(ngModel)]="selectedCamera">
          <!-- Iterate through available cameras -->
          @for (camera of cameras; track camera) {
            <option [value]="camera.deviceId">{{camera.label}}</option>
          }
        </select>
      </div>
    </div>
  }

  <!-- Loading Indicator -->
  @if (isLoading) {
    <p class="text-center">âŒ› Startet ...</p>
  }

  <!-- Scanner Component -->
  <div class="scanner-container">
    <zxing-scanner [formats]="allowedFormats" #scanner (scanSuccess)="onScanSuccess($event)"></zxing-scanner>
  </div>

  <!-- Error Message Display -->
  @if (hasScanError) {
    <div  class="alert alert-danger" role="alert">
      {{errorMessage}}
    </div>
  }

  <!-- Cancel Button -->
  <div class="d-flex justify-content-center">
    @if (!isLoading) {
      <button class="btn btn-warning" (click)="onCancel()">Abbrechen</button>
    }
  </div>

</div>
